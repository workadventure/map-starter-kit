<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <meta name="title" content="WorkAdventure Starter Kit">

    <link href="public/styles.css" rel="stylesheet">

    <title>WorkAdventure test map</title>
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml">
    <script>
        window.onload = function () {
            const host = window.location.host;
            let path = window.location.pathname;
            if (path.endsWith('index.html')) {
                path = path.substr(path, path.length - 'index.html'.length);
            }
            const instanceId = Math.random().toString(36).substring(2, 15);
            const url = `https://play.workadventu.re/_/${instanceId}/${host}${path}office.tmj`;
            //document.getElementById('testMapURL').href = url;
            //document.getElementById('testMapBtnURL').href = url;
            document.getElementById('testMapURL').innerText = url;

            const tmjURL = window.location.protocol + '//' + window.location.host + path + 'office.tmj';
            document.getElementById('tmjURL').innerText = tmjURL;

            const gettingStartedLink = 'https://workadventu.re/getting-started?name=Map&mapUrl=' + tmjURL;
            document.getElementById('gettingStartedLink').href = gettingStartedLink;
        };

        async function loadTMJ() {
            const response = await fetch("office.tmj");
            const data = await response.json();

            function findProperty(list, key) {
                if (!Array.isArray(list)) return null;
                const item = list.find(p => p.name === key);
                return item ? item.value : null;
            }

            const mapName = findProperty(data.properties, "mapName");
            const mapImage = findProperty(data.properties, "mapImage");
            const mapDescription = findProperty(data.properties, "mapDescription");

            console.log("mapName:", mapName);
            console.log("mapImage:", mapImage);
            console.log("mapDescription:", mapDescription);
        }

        loadTMJ();
    </script>
</head>

<body>
<div class="content">
    <header>
        <div class="logo">
            <a href="https://workadventu.re/" target="_blank" title="Workadventure">
                <img src="public/images/logo.svg" alt="Workadventure logo" height="36" />
            </a>
        </div>
        <div style="flex-grow: 1;"></div>
        <div class="socials">
            <a href="https://discord.gg/G6Xh9ZM9aR" target="_blank" title="discord">
                <img src="/public/images/brand-discord.svg" alt="discord">
            </a>
            <a href="https://github.com/thecodingmachine/workadventure" target="_blank" title="github">
                <img src="/public/images/brand-github.svg" alt="github">
            </a>
            <a href="https://www.youtube.com/channel/UCXJ9igV-kb9gw1ftR33y5tA" target="_blank" title="youtube">
                <img src="/public/images/brand-youtube.svg" alt="youtube">
            </a>
            <a href="https://twitter.com/Workadventure_" target="_blank" title="twitter">
                <img src="/public/images/brand-x.svg" alt="X">
            </a>
            <a href="https://www.linkedin.com/company/workadventu-re" target="_blank" title="linkedin">
                <img src="/public/images/brand-linkedin.svg" alt="linkedin">
            </a>
        </div>
        <div class="btn-header-wrapper">
            <a href="#" class="btn btn-light">Talk to the community</a>
            <a href="#" class="btn">Documentation</a>
        </div>
    </header>
    <main>
        <section class="card-map">
            <div class="map-cover" style="background-image: url('https://www.placecats.com/millie_neo/1620/1024');"></div>
            <div class="map-date">
                Last edit: 29/01/2026 14:57
            </div>
            <div class="map-name">
                Main office
            </div>
            <div class="map-detail">
                <div class="map-file">
                    <strong>office</strong>.tmj
                </div>
                <div class="map-weight">
                    <strong>1.5</strong>
                    <span style="opacity: .5">Mo</span>
                </div>
            </div>
            <div class="map-desc">
                Temporibus aperiam rerum perspiciatis accusanti. Dolores in notramea do las rereaus perspiciatis accusanti.
            </div>
            <div class="map-testurl">
                <a href="#" class="btn">Test my map</a>
            </div>

        </section>
    </main>
    <div class="button-wrapper">
        <div style="flex-grow: 1;">
        </div>
        <div>
            <a href="step1-git.html">
                Publish
            </a>
        </div>
    </div>
</div>
<div class="bg" style="background-image: url(https://www.placecats.com/millie_neo/1620/1024);"></div>
</body>

</html>